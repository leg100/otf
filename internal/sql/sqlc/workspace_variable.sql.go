// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: workspace_variable.sql

package sqlc

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const deleteWorkspaceVariableByID = `-- name: DeleteWorkspaceVariableByID :one
DELETE
FROM workspace_variables wv USING variables v
WHERE wv.variable_id = $1
RETURNING wv.workspace_id, (v.*)::"variables" AS variable
`

type DeleteWorkspaceVariableByIDRow struct {
	WorkspaceID pgtype.Text
	Variable    Variable
}

func (q *Queries) DeleteWorkspaceVariableByID(ctx context.Context, variableID pgtype.Text) (DeleteWorkspaceVariableByIDRow, error) {
	row := q.db.QueryRow(ctx, deleteWorkspaceVariableByID, variableID)
	var i DeleteWorkspaceVariableByIDRow
	err := row.Scan(&i.WorkspaceID, &i.Variable)
	return i, err
}

const findWorkspaceVariableByVariableID = `-- name: FindWorkspaceVariableByVariableID :one
SELECT
    workspace_id,
    v.variable_id, v.key, v.value, v.description, v.category, v.sensitive, v.hcl, v.version_id
FROM workspace_variables
JOIN variables v USING (variable_id)
WHERE v.variable_id = $1
`

type FindWorkspaceVariableByVariableIDRow struct {
	WorkspaceID pgtype.Text
	VariableID  pgtype.Text
	Key         pgtype.Text
	Value       pgtype.Text
	Description pgtype.Text
	Category    pgtype.Text
	Sensitive   pgtype.Bool
	Hcl         pgtype.Bool
	VersionID   pgtype.Text
}

func (q *Queries) FindWorkspaceVariableByVariableID(ctx context.Context, variableID pgtype.Text) (FindWorkspaceVariableByVariableIDRow, error) {
	row := q.db.QueryRow(ctx, findWorkspaceVariableByVariableID, variableID)
	var i FindWorkspaceVariableByVariableIDRow
	err := row.Scan(
		&i.WorkspaceID,
		&i.VariableID,
		&i.Key,
		&i.Value,
		&i.Description,
		&i.Category,
		&i.Sensitive,
		&i.Hcl,
		&i.VersionID,
	)
	return i, err
}

const findWorkspaceVariablesByWorkspaceID = `-- name: FindWorkspaceVariablesByWorkspaceID :many
SELECT v.variable_id, v.key, v.value, v.description, v.category, v.sensitive, v.hcl, v.version_id
FROM workspace_variables
JOIN variables v USING (variable_id)
WHERE workspace_id = $1
`

func (q *Queries) FindWorkspaceVariablesByWorkspaceID(ctx context.Context, workspaceID pgtype.Text) ([]Variable, error) {
	rows, err := q.db.Query(ctx, findWorkspaceVariablesByWorkspaceID, workspaceID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Variable
	for rows.Next() {
		var i Variable
		if err := rows.Scan(
			&i.VariableID,
			&i.Key,
			&i.Value,
			&i.Description,
			&i.Category,
			&i.Sensitive,
			&i.Hcl,
			&i.VersionID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertWorkspaceVariable = `-- name: InsertWorkspaceVariable :exec
INSERT INTO workspace_variables (
    variable_id,
    workspace_id
) VALUES (
    $1,
    $2
)
`

type InsertWorkspaceVariableParams struct {
	VariableID  pgtype.Text
	WorkspaceID pgtype.Text
}

func (q *Queries) InsertWorkspaceVariable(ctx context.Context, arg InsertWorkspaceVariableParams) error {
	_, err := q.db.Exec(ctx, insertWorkspaceVariable, arg.VariableID, arg.WorkspaceID)
	return err
}
