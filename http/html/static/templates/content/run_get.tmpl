{{ template "layout" . }}

{{ define "title" }}{{ .Content.Run.ID }}{{ end }}

{{ define "container-header" }}
  <a href="{{ listWorkspacePath .Content.Run }}">workspaces</a>
  /
  <a href="{{ getWorkspacePath .Content.Run }}">{{ .Content.Run.WorkspaceName }}</a>
  /
  <a href="{{ listRunPath .Content.Run }}">runs</a>
  /
  {{ .Content.Run.ID }}
{{ end }}

{{ define "container-header-links" }}
  {{ $links := dict "plan" (getPlanPath .Content.Run) "apply" (getApplyPath .Content.Run) }}
  {{ range $txt, $link := $links }}
    {{ if eq $.CurrentPath $link }}
      <li><a class="active" href="{{ $link }}">{{ $txt }}</a></li>
    {{ else }}
      <li><a href="{{ $link }}">{{ $txt }}</a></li>
    {{ end }}
  {{ end }}
{{ end }}

{{ define "content" }}
  <span class="status status-{{ .Content.Run.Status }}">
    <a href="{{ getRunPath .Content.Run }}">{{ .Content.Run.Status.String | replace "_" " "}}</a>
  </span>
  <div>
    <span>Plan</span>
    {{ template "logs" .Content.PlanLogs }}
  </div>
  <div>
    <span>Apply</span>
    {{ template "logs" .Content.ApplyLogs }}
  </div>
{{ end }}

