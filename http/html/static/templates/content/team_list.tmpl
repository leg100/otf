{{ template "layout" . }}

{{ define "container-header" }}teams{{ end }}

{{ define "container-header-actions" }}
  {{ $canCreate := .CurrentUser.CanAccessOrganization .CreateTeamAction .Organization }}
  <form action="{{ newTeamPath .Organization }}" method="GET">
    <button
      id="new-team-button"
      type="submit"
      {{ if not $canCreate }}title="insufficient permissions" disabled{{ end }}
    >
      New Team
    </button>
  </form>
{{ end }}

{{ define "content" }}
  <div id="content-list" class="content-list">
    {{ range .Teams }}
      <div id="item-team-{{ .Name }}" class="item">
        <div class="item-heading">
          <a class="status" href="{{ teamPath .ID }}">{{ .Name }}</a>
        </div>
        <div class="item-content">
          {{ template "identifier" . }}
          {{ if $.CurrentUser.CanAccessOrganization $.DeleteTeamAction .Organization }}
            <form action="{{ deleteTeamPath .ID }}" method="POST">
              <button class="delete" onclick="return confirm('Are you sure you want to delete?')">delete</button>
              <input type="hidden" name="id" value="{{ .ID }}">
            </form>
          {{ end }}
        </div>
      </div>
    {{ else }}
      No teams currently exist.
    {{ end }}
  </div>
{{ end }}
