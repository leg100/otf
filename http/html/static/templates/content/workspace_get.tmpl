{{ template "layout" . }}

{{ define "title" }}workspace: {{ .Content.Name }}{{ end }}

{{ define "container-header" }}
  <a href="{{ listWorkspacePath .Content.OrganizationName }}">workspaces</a> / {{ .Content.Workspace.Name }}
{{ end }}

{{ define "container-header-actions" }}
  <form action="{{ newRunPath .Content.OrganizationName .Content.Workspace.Name }}" method="GET">
    <button type="submit">New Run</button>
  </form>
{{ end }}

{{ define "container-header-links" }}
  <div class="smallcaps">
    <a href="{{ .Relative "listRun" }}">runs</a>
  </div>
  <div>
    <a href="{{ .Relative "editWorkspace" }}">{{ template "cog_icon" }}</a>
  </div>
  <div>v{{ .Content.Workspace.TerraformVersion }}</div>
  <div class="workspace-lock">
    {{ if .Content.Workspace.Locked }}
      <span class="workspace-lock-status workspace-lock-status-locked">Locked</span>
      <form action="{{ .Relative "unlockWorkspace" }}" method="POST"><button>Unlock</button></form>
    {{ else }}
      <span class="workspace-lock-status">Unlocked</span>
      <form action="{{ .Relative "lockWorkspace" }}" method="POST"><button>Lock</button></form>
    {{ end }}
  </div>
{{ end }}

{{ define "content" }}
  <form action="{{ .Relative "deleteWorkspace" }}" method="POST">
    <button class="delete" onclick="return confirm('Are you sure you want to delete?')">Delete workspace</button>
  </form>
{{ end }}
