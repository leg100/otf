{{ template "layout" . }}

{{ define "title" }}VCS providers{{ end }}

{{ define "container-header" }}
  <a href="{{ listWorkspacePath .Content }}">workspaces</a>
  /
  <a href="{{ getWorkspacePath .Content }}">{{ .Content.WorkspaceName }}</a>
  /
  vcs repositories
{{ end }}

{{ define "content" }}
  <div>
    Select a VCS repository to connect this workspace to. Either select a repository from the list or enter the name of a repository below.
  </div>
  <form action="{{ connectWorkspaceRepoPath $.Content }}" method="POST">
    <input type="text" name="identifier" id="identifier" value="" placeholder="{owner}/{repository}" required>
    <button>connect</button>
  </form>

  <div id="content-list" class="content-list">
    {{ range .Content.Items }}
      <div class="item">
        <div class="item-heading">
          <span class="status">{{ .Identifier }}</span>
          <form action="{{ connectWorkspaceRepoPath $.Content }}" method="POST">
            <input type="hidden" name="identifier" id="identifier" value="{{ .Identifier }}" required>
            <input type="hidden" name="branch" id="branch" value="{{ .Branch }}" required>
            <input type="hidden" name="http_url" id="http_url" value="{{ .HTTPURL }}" required>
            <button>connect</button>
          </form>
        </div>
        <div class="item-content">
          {{ template "identifier" . }}
        </div>
      </div>
    {{ else }}
      No VCS providers are currently configured.
    {{ end }}
    <div class="content-list-footer">
      {{ if .Content.PrevPage }}
      <a href="{{ urlJoin (dict "path" $.CurrentPath "query" .Content.PrevPageQuery) }}">Previous Page</a>
      {{ end }}
      {{ if .Content.NextPage }}
      <a href="{{ urlJoin (dict "path" $.CurrentPath "query" .Content.NextPageQuery) }}">Next Page</a>
      {{ end }}
    </div>
  </div>
{{ end }}

