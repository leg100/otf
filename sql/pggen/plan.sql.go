// Code generated by pggen. DO NOT EDIT.

package pggen

import (
	"context"
	"fmt"
	"time"

	"github.com/jackc/pgconn"
	"github.com/jackc/pgtype"
	"github.com/jackc/pgx/v4"
)

const insertPlanSQL = `INSERT INTO plans (
    plan_id,
    run_id,
    status,
    additions,
    changes,
    destructions
) VALUES (
    $1,
    $2,
    $3,
    $4,
    $5,
    $6
);`

type InsertPlanParams struct {
	PlanID       pgtype.Text
	RunID        pgtype.Text
	Status       pgtype.Text
	Additions    int
	Changes      int
	Destructions int
}

// InsertPlan implements Querier.InsertPlan.
func (q *DBQuerier) InsertPlan(ctx context.Context, params InsertPlanParams) (pgconn.CommandTag, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "InsertPlan")
	cmdTag, err := q.conn.Exec(ctx, insertPlanSQL, params.PlanID, params.RunID, params.Status, params.Additions, params.Changes, params.Destructions)
	if err != nil {
		return cmdTag, fmt.Errorf("exec query InsertPlan: %w", err)
	}
	return cmdTag, err
}

// InsertPlanBatch implements Querier.InsertPlanBatch.
func (q *DBQuerier) InsertPlanBatch(batch genericBatch, params InsertPlanParams) {
	batch.Queue(insertPlanSQL, params.PlanID, params.RunID, params.Status, params.Additions, params.Changes, params.Destructions)
}

// InsertPlanScan implements Querier.InsertPlanScan.
func (q *DBQuerier) InsertPlanScan(results pgx.BatchResults) (pgconn.CommandTag, error) {
	cmdTag, err := results.Exec()
	if err != nil {
		return cmdTag, fmt.Errorf("exec InsertPlanBatch: %w", err)
	}
	return cmdTag, err
}

const insertPlanStatusTimestampSQL = `INSERT INTO plan_status_timestamps (
    plan_id,
    status,
    timestamp
) VALUES (
    $1,
    $2,
    $3
);`

type InsertPlanStatusTimestampParams struct {
	ID        pgtype.Text
	Status    pgtype.Text
	Timestamp time.Time
}

// InsertPlanStatusTimestamp implements Querier.InsertPlanStatusTimestamp.
func (q *DBQuerier) InsertPlanStatusTimestamp(ctx context.Context, params InsertPlanStatusTimestampParams) (pgconn.CommandTag, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "InsertPlanStatusTimestamp")
	cmdTag, err := q.conn.Exec(ctx, insertPlanStatusTimestampSQL, params.ID, params.Status, params.Timestamp)
	if err != nil {
		return cmdTag, fmt.Errorf("exec query InsertPlanStatusTimestamp: %w", err)
	}
	return cmdTag, err
}

// InsertPlanStatusTimestampBatch implements Querier.InsertPlanStatusTimestampBatch.
func (q *DBQuerier) InsertPlanStatusTimestampBatch(batch genericBatch, params InsertPlanStatusTimestampParams) {
	batch.Queue(insertPlanStatusTimestampSQL, params.ID, params.Status, params.Timestamp)
}

// InsertPlanStatusTimestampScan implements Querier.InsertPlanStatusTimestampScan.
func (q *DBQuerier) InsertPlanStatusTimestampScan(results pgx.BatchResults) (pgconn.CommandTag, error) {
	cmdTag, err := results.Exec()
	if err != nil {
		return cmdTag, fmt.Errorf("exec InsertPlanStatusTimestampBatch: %w", err)
	}
	return cmdTag, err
}

const updatePlanStatusSQL = `UPDATE plans
SET
    status = $1
WHERE plan_id = $2
RETURNING plan_id
;`

// UpdatePlanStatus implements Querier.UpdatePlanStatus.
func (q *DBQuerier) UpdatePlanStatus(ctx context.Context, status pgtype.Text, id pgtype.Text) (pgtype.Text, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "UpdatePlanStatus")
	row := q.conn.QueryRow(ctx, updatePlanStatusSQL, status, id)
	var item pgtype.Text
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("query UpdatePlanStatus: %w", err)
	}
	return item, nil
}

// UpdatePlanStatusBatch implements Querier.UpdatePlanStatusBatch.
func (q *DBQuerier) UpdatePlanStatusBatch(batch genericBatch, status pgtype.Text, id pgtype.Text) {
	batch.Queue(updatePlanStatusSQL, status, id)
}

// UpdatePlanStatusScan implements Querier.UpdatePlanStatusScan.
func (q *DBQuerier) UpdatePlanStatusScan(results pgx.BatchResults) (pgtype.Text, error) {
	row := results.QueryRow()
	var item pgtype.Text
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("scan UpdatePlanStatusBatch row: %w", err)
	}
	return item, nil
}

const updatePlannedChangesByIDSQL = `UPDATE plans
SET
    additions = $1,
    changes = $2,
    destructions = $3
WHERE plan_id = $4
RETURNING plan_id
;`

type UpdatePlannedChangesByIDParams struct {
	Additions    int
	Changes      int
	Destructions int
	PlanID       pgtype.Text
}

// UpdatePlannedChangesByID implements Querier.UpdatePlannedChangesByID.
func (q *DBQuerier) UpdatePlannedChangesByID(ctx context.Context, params UpdatePlannedChangesByIDParams) (pgtype.Text, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "UpdatePlannedChangesByID")
	row := q.conn.QueryRow(ctx, updatePlannedChangesByIDSQL, params.Additions, params.Changes, params.Destructions, params.PlanID)
	var item pgtype.Text
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("query UpdatePlannedChangesByID: %w", err)
	}
	return item, nil
}

// UpdatePlannedChangesByIDBatch implements Querier.UpdatePlannedChangesByIDBatch.
func (q *DBQuerier) UpdatePlannedChangesByIDBatch(batch genericBatch, params UpdatePlannedChangesByIDParams) {
	batch.Queue(updatePlannedChangesByIDSQL, params.Additions, params.Changes, params.Destructions, params.PlanID)
}

// UpdatePlannedChangesByIDScan implements Querier.UpdatePlannedChangesByIDScan.
func (q *DBQuerier) UpdatePlannedChangesByIDScan(results pgx.BatchResults) (pgtype.Text, error) {
	row := results.QueryRow()
	var item pgtype.Text
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("scan UpdatePlannedChangesByIDBatch row: %w", err)
	}
	return item, nil
}

const findRunIDByPlanIDSQL = `SELECT run_id
FROM plans
WHERE plan_id = $1
;`

// FindRunIDByPlanID implements Querier.FindRunIDByPlanID.
func (q *DBQuerier) FindRunIDByPlanID(ctx context.Context, planID pgtype.Text) (pgtype.Text, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "FindRunIDByPlanID")
	row := q.conn.QueryRow(ctx, findRunIDByPlanIDSQL, planID)
	var item pgtype.Text
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("query FindRunIDByPlanID: %w", err)
	}
	return item, nil
}

// FindRunIDByPlanIDBatch implements Querier.FindRunIDByPlanIDBatch.
func (q *DBQuerier) FindRunIDByPlanIDBatch(batch genericBatch, planID pgtype.Text) {
	batch.Queue(findRunIDByPlanIDSQL, planID)
}

// FindRunIDByPlanIDScan implements Querier.FindRunIDByPlanIDScan.
func (q *DBQuerier) FindRunIDByPlanIDScan(results pgx.BatchResults) (pgtype.Text, error) {
	row := results.QueryRow()
	var item pgtype.Text
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("scan FindRunIDByPlanIDBatch row: %w", err)
	}
	return item, nil
}

const getPlanBinByIDSQL = `SELECT plan_bin
FROM plans
WHERE plan_id = $1
;`

// GetPlanBinByID implements Querier.GetPlanBinByID.
func (q *DBQuerier) GetPlanBinByID(ctx context.Context, planID pgtype.Text) ([]byte, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "GetPlanBinByID")
	row := q.conn.QueryRow(ctx, getPlanBinByIDSQL, planID)
	item := []byte{}
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("query GetPlanBinByID: %w", err)
	}
	return item, nil
}

// GetPlanBinByIDBatch implements Querier.GetPlanBinByIDBatch.
func (q *DBQuerier) GetPlanBinByIDBatch(batch genericBatch, planID pgtype.Text) {
	batch.Queue(getPlanBinByIDSQL, planID)
}

// GetPlanBinByIDScan implements Querier.GetPlanBinByIDScan.
func (q *DBQuerier) GetPlanBinByIDScan(results pgx.BatchResults) ([]byte, error) {
	row := results.QueryRow()
	item := []byte{}
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("scan GetPlanBinByIDBatch row: %w", err)
	}
	return item, nil
}

const getPlanJSONByIDSQL = `SELECT plan_json
FROM plans
WHERE plan_id = $1
;`

// GetPlanJSONByID implements Querier.GetPlanJSONByID.
func (q *DBQuerier) GetPlanJSONByID(ctx context.Context, planID pgtype.Text) ([]byte, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "GetPlanJSONByID")
	row := q.conn.QueryRow(ctx, getPlanJSONByIDSQL, planID)
	item := []byte{}
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("query GetPlanJSONByID: %w", err)
	}
	return item, nil
}

// GetPlanJSONByIDBatch implements Querier.GetPlanJSONByIDBatch.
func (q *DBQuerier) GetPlanJSONByIDBatch(batch genericBatch, planID pgtype.Text) {
	batch.Queue(getPlanJSONByIDSQL, planID)
}

// GetPlanJSONByIDScan implements Querier.GetPlanJSONByIDScan.
func (q *DBQuerier) GetPlanJSONByIDScan(results pgx.BatchResults) ([]byte, error) {
	row := results.QueryRow()
	item := []byte{}
	if err := row.Scan(&item); err != nil {
		return item, fmt.Errorf("scan GetPlanJSONByIDBatch row: %w", err)
	}
	return item, nil
}

const updatePlanBinByIDSQL = `UPDATE plans
SET plan_bin = $1
WHERE plan_id = $2
;`

// UpdatePlanBinByID implements Querier.UpdatePlanBinByID.
func (q *DBQuerier) UpdatePlanBinByID(ctx context.Context, planBin []byte, planID pgtype.Text) (pgconn.CommandTag, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "UpdatePlanBinByID")
	cmdTag, err := q.conn.Exec(ctx, updatePlanBinByIDSQL, planBin, planID)
	if err != nil {
		return cmdTag, fmt.Errorf("exec query UpdatePlanBinByID: %w", err)
	}
	return cmdTag, err
}

// UpdatePlanBinByIDBatch implements Querier.UpdatePlanBinByIDBatch.
func (q *DBQuerier) UpdatePlanBinByIDBatch(batch genericBatch, planBin []byte, planID pgtype.Text) {
	batch.Queue(updatePlanBinByIDSQL, planBin, planID)
}

// UpdatePlanBinByIDScan implements Querier.UpdatePlanBinByIDScan.
func (q *DBQuerier) UpdatePlanBinByIDScan(results pgx.BatchResults) (pgconn.CommandTag, error) {
	cmdTag, err := results.Exec()
	if err != nil {
		return cmdTag, fmt.Errorf("exec UpdatePlanBinByIDBatch: %w", err)
	}
	return cmdTag, err
}

const updatePlanJSONByIDSQL = `UPDATE plans
SET plan_json = $1
WHERE plan_id = $2
;`

// UpdatePlanJSONByID implements Querier.UpdatePlanJSONByID.
func (q *DBQuerier) UpdatePlanJSONByID(ctx context.Context, planJSON []byte, planID pgtype.Text) (pgconn.CommandTag, error) {
	ctx = context.WithValue(ctx, "pggen_query_name", "UpdatePlanJSONByID")
	cmdTag, err := q.conn.Exec(ctx, updatePlanJSONByIDSQL, planJSON, planID)
	if err != nil {
		return cmdTag, fmt.Errorf("exec query UpdatePlanJSONByID: %w", err)
	}
	return cmdTag, err
}

// UpdatePlanJSONByIDBatch implements Querier.UpdatePlanJSONByIDBatch.
func (q *DBQuerier) UpdatePlanJSONByIDBatch(batch genericBatch, planJSON []byte, planID pgtype.Text) {
	batch.Queue(updatePlanJSONByIDSQL, planJSON, planID)
}

// UpdatePlanJSONByIDScan implements Querier.UpdatePlanJSONByIDScan.
func (q *DBQuerier) UpdatePlanJSONByIDScan(results pgx.BatchResults) (pgconn.CommandTag, error) {
	cmdTag, err := results.Exec()
	if err != nil {
		return cmdTag, fmt.Errorf("exec UpdatePlanJSONByIDBatch: %w", err)
	}
	return cmdTag, err
}
